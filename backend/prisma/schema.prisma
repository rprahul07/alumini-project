generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Admin {
  id          Int      @id @default(autoincrement())
  fullName    String   @map("full_name") @db.VarChar(100)
  email       String   @unique @db.VarChar(100)
  password    String   @db.VarChar(255)
  createdAt   DateTime @default(now()) @map("created_at")

  @@index([email])
  @@map("admins")
}

model ActivityLog {
  id        Int      @id @default(autoincrement())
  userId    Int      @map("user_id")
  userType  String   @map("user_type") @db.VarChar(50)
  action    String   @db.VarChar(100)
  details   Json?
  createdAt DateTime @default(now()) @map("created_at")

  @@index([userId])
  @@map("activity_logs")
}

model PasswordChangeLog {
  id        Int      @id @default(autoincrement())
  userId    Int      @map("user_id")
  userType  String   @map("user_type") @db.VarChar(50)
  changedAt DateTime @default(now()) @map("changed_at")

  @@index([userId])
  @@map("password_change_logs")
}

model EmailChangeLog {
  id        Int      @id @default(autoincrement())
  userId    Int      @map("user_id")
  userType  String   @map("user_type") @db.VarChar(50)
  oldEmail  String   @map("old_email") @db.VarChar(100)
  newEmail  String   @map("new_email") @db.VarChar(100)
  changedAt DateTime @default(now()) @map("changed_at")

  @@index([userId])
  @@map("email_change_logs")
}

model Student {
  id              Int      @id @default(autoincrement())
  fullName        String   @map("full_name") @db.VarChar(100)
  email           String   @unique @db.VarChar(100)
  phoneNumber     String?  @map("phone_number") @db.VarChar(20)
  password        String   @db.VarChar(255)
  department      String   @db.VarChar(100)
  currentSemester String   @map("current_semester") @db.VarChar(10)
  rollNumber      String   @unique @map("roll_number") @db.VarChar(50)
  createdAt       DateTime @default(now()) @map("created_at")

  @@index([email])
  @@map("students")
}

model Alumni {
  id              Int      @id @default(autoincrement())
  fullName        String   @map("full_name") @db.VarChar(100)
  email           String   @unique @db.VarChar(100)
  phoneNumber     String?  @map("phone_number") @db.VarChar(20)
  password        String   @db.VarChar(255)
  graduationYear  Int      @map("graduation_year")
  department      String   @db.VarChar(100)
  course          String?  @db.VarChar(100)
  currentJobTitle String   @map("current_job_title") @db.VarChar(100)
  companyName     String   @map("company_name") @db.VarChar(100)
  createdAt       DateTime @default(now()) @map("created_at")

  @@index([email])
  @@map("alumni")
}

model Faculty {
  id          Int      @id @default(autoincrement())
  fullName    String   @map("full_name") @db.VarChar(100)
  email       String   @unique @db.VarChar(100)
  phoneNumber String?  @map("phone_number") @db.VarChar(20)
  password    String   @db.VarChar(255)
  department  String   @db.VarChar(100)
  designation String   @db.VarChar(100)
  createdAt   DateTime @default(now()) @map("created_at")

  @@index([email])
  @@map("faculty")
}
